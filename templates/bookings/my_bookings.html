{% extends 'base.html' %}

{% block title %}My Bookings - Bangladesh Railway{% endblock %}

{% block content %}
<div class="container">
    <h2 style="color: #D97B3A; margin-bottom: 2rem;">My Bookings</h2>

    {% if bookings %}
    <div class="train-list">
        {% for booking in bookings %}
        <div class="train-card">
            <div class="train-header">
                <div>
                    <div class="train-name">{{ booking.train.train_name }} ({{ booking.train.train_number }})</div>
                    <div style="color: #666; font-size: 0.9rem;">PNR: <strong>{{ booking.pnr }}</strong></div>
                </div>
                <div>
                    {% if booking.payment_status == 'success' %}
                    {% if booking.journey_date > today %}
                    <span
                        style="background: #d4edda; color: #155724; padding: 0.5rem 1rem; border-radius: 5px; font-weight: bold;">✓
                        Booked</span>
                    {% else %}
                    <span
                        style="background: #d1ecf1; color: #0c5460; padding: 0.5rem 1rem; border-radius: 5px; font-weight: bold;">✓
                        Travelled</span>
                    {% endif %}
                    {% else %}
                    <span
                        style="background: #fff3cd; color: #856404; padding: 0.5rem 1rem; border-radius: 5px; font-weight: bold;">⏳
                        Pending</span>
                    {% endif %}
                </div>
            </div>

            <div
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin: 1.5rem 0; padding: 1rem; background: #f9f9f9; border-radius: 8px;">
                <div>
                    <p style="color: #666; font-size: 0.9rem;">Journey Date</p>
                    <p style="font-weight: bold;">{{ booking.journey_date|date:"d M, Y" }}</p>
                </div>
                <div>
                    <p style="color: #666; font-size: 0.9rem;">Route</p>
                    <p style="font-weight: bold;">{{ booking.origin_station.station_name }} → {{
                        booking.destination_station.station_name }}</p>
                </div>
                <div>
                    <p style="color: #666; font-size: 0.9rem;">Total Fare</p>
                    <p style="font-weight: bold; color: #D97B3A;">৳{{ booking.total_fare }}</p>
                </div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: center;">
                <a href="{% url 'bookings:booking_detail' booking.pnr %}" class="btn btn-primary">View Details</a>

                {% if booking.payment_status == 'success' %}
                <a href="{% url 'bookings:download_ticket' booking.pnr %}" class="btn btn-success">Download Ticket</a>
                {% else %}
                <a href="{% url 'bookings:payment' booking.pnr %}" class="btn btn-success">Complete Payment</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; background: white; border-radius: 10px;">
        <h3 style="color: #666;">No bookings yet</h3>
        <p style="color: #999; margin: 1rem 0;">Start booking your train tickets now!</p>
        <a href="{% url 'trains:home' %}" class="btn btn-primary">Search Trains</a>
    </div>
    {% endif %}
</div>
{% endblock %}